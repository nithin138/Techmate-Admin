"use strict";(self.webpackChunkcuba_react=self.webpackChunkcuba_react||[]).push([[696],{7316:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var s=t(9060),c=t(2635),l=t(7416),n=t(8016),r=t(4876),i=t(8520),o=t(2620),d=t(9003),m=t(8968),u=t(8372),x=(t(6736),t(1560)),h=t(7776),v=(t(7628),t(1264)),j=t(3380),f=t.n(j),p=t(2496);const y=()=>{(0,x.i6)(),JSON.parse(localStorage.getItem("role_name"));const[e,a]=(0,s.useState)(""),[t,l]=(0,s.useState)(""),[j,y]=(0,s.useState)(!1),[N,b]=(0,s.useState)("all"),[g,_]=(0,s.useState)(""),[k,w]=(0,s.useState)([{status:"pending",transactionId:"123",customerName:"Ravi",quantity:7,date:new Date,amount:200,paymentData:{cardType:"visa",paymentType:"card",cardNumber:"4242"}},{status:"recieved",transactionId:"124",customerName:"Ravi",quantity:7,date:new Date,amount:199,paymentData:{paymentType:"paypal",cardNumber:"4242",address:"ravi@gk.com"}}]);(0,s.useEffect)((()=>{(async()=>{y(!0);const a=await JSON.parse(localStorage.getItem("token"));try{var s;let c={};e&&t&&"all"!==N&&(c={start_date:f()(e).format("YYYY-MM-DD"),end_date:f()(t).format("YYYY-MM-DD")});const l=await u.c.get("".concat(h.OM,"/api/order/get-all-transactions"),{params:c,headers:{Authorization:"".concat(a)}}),n=null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data;y(!1),w(n.reverse())}catch(c){y(!1)}finally{y(!1)}})()}),[e,t]);const D=e=>{b(e);const{startDate:t,endDate:s}=C(e);a(t),l(s)},C=e=>{const a=new Date;let t=new Date;new Date;switch(e){case"all":default:break;case"today":t.setDate(a.getDate());break;case"7d":t.setDate(a.getDate()-7);break;case"1m":t.setMonth(a.getMonth()-1);break;case"3m":t.setMonth(a.getMonth()-3);break;case"6m":t.setMonth(a.getMonth()-6);break;case"1yr":t.setFullYear(a.getFullYear()-1)}return{startDate:t,endDate:a}},Y=[{name:"Transaction Id",selector:e=>null===e||void 0===e?void 0:e._id,center:!0,width:"150px",cell:e=>null===e||void 0===e?void 0:e._id},{name:"Customer Name",selector:e=>{var a;return"".concat((null===e||void 0===e||null===(a=e.customer_info)||void 0===a?void 0:a.first_name)||"Unspecified")},cell:e=>{var a,t;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(n.c,{className:"d-flex",children:(0,p.jsx)(n.c,{body:!0,className:"align-self-center",children:(0,p.jsx)("div",{children:null!==e&&void 0!==e&&null!==(a=e.customer_info)&&void 0!==a&&a.first_name&&null!==e&&void 0!==e&&null!==(t=e.customer_info)&&void 0!==t&&t.last_name?"".concat(e.customer_info.first_name," ").concat(e.customer_info.last_name):"Unspecified"})})})})},sortable:!0,center:!0},{name:"No Items",selector:e=>null===e||void 0===e?void 0:e.quantity,sortable:!0,center:!0,cell:e=>null!==e&&void 0!==e&&e.no_of_items?null===e||void 0===e?void 0:e.no_of_items:0},{name:"Date & Time",selector:e=>null===e||void 0===e?void 0:e.date,sortable:!0,center:!0,cell:e=>f()(e.createdAt).format("DD MMM YYYY, hh:mmA")},{name:"Amount",selector:e=>e.amount,sortable:!0,center:!0,cell:e=>"$".concat(null!==e&&void 0!==e&&e.amount?null===e||void 0===e?void 0:e.amount:0)},{name:"Payment Type",selector:e=>"".concat(null===e||void 0===e?void 0:e.paymentData),sortable:!0,center:!0,cell:e=>(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(n.c,{className:"d-flex",children:(0,p.jsx)(n.c,{body:!0,className:"align-self-center",children:(0,p.jsx)("div",{children:null!==e&&void 0!==e&&e.payment_Type?null===e||void 0===e?void 0:e.payment_Type:"N/A"})})})})},{name:"Status",selector:e=>"".concat(null===e||void 0===e?void 0:e.status),sortable:!0,center:!0,cell:e=>"completed"===(null===e||void 0===e?void 0:e.transaction_status)?(0,p.jsx)("div",{style:{background:"#b7d5ac",padding:"6px 14px",borderRadius:"20px",color:"#0e7a0d",fontWeight:"bold",textTransform:"capitalize"},children:e.transaction_status}):(0,p.jsx)("div",{style:{background:"#fff1dc",padding:"6px 14px",borderRadius:"20px",color:"#EF940B",textTransform:"capitalize"},children:e.transaction_status})}],M=k.filter((e=>{var a,t,s,c,l;return(null===e||void 0===e||null===(a=e.customer_info)||void 0===a||null===(t=a.first_name)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null===e||void 0===e||null===(s=e.customer_info)||void 0===s||null===(c=s.last_name)||void 0===c?void 0:c.toLowerCase().includes(g.toLowerCase()))||(null===e||void 0===e||null===(l=e.amount)||void 0===l?void 0:l.toString().includes(g.toLowerCase()))}));return(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(r.c,{xxl:12,className:"pb-2",children:(0,p.jsx)(r.c,{children:(0,p.jsx)(i.c,{md:12,lg:12,xl:12,xxl:12,children:(0,p.jsxs)("div",{className:"d-flex align-items-center mb-3 justify-between",children:[(0,p.jsxs)(o.c,{tabs:!0,className:"product_variant_tabs",children:[(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:"all"===N?"active":"",onClick:()=>D("all"),children:"All"})}),(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:"today"===N?"active":"",onClick:()=>D("today"),children:"Today"})}),(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:"7d"===N?"active":"",onClick:()=>D("7d"),children:"7D"})}),(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:"1m"===N?"active":"",onClick:()=>D("1m"),children:"1M"})}),(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:"3m"===N?"active":"",onClick:()=>D("3m"),children:"3M"})}),(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:"6m"===N?"active":"",onClick:()=>D("6m"),children:"6M"})}),(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:"1yr"===N?"active":"",onClick:()=>D("1yr"),children:"1Y"})})]}),(0,p.jsx)("div",{className:"file-content file-content1 justify-content-end",children:(0,p.jsxs)("div",{className:"mb-0 form-group position-relative search_outer d-flex align-items-center",children:[(0,p.jsx)("i",{className:"fa fa-search",style:{top:"unset"}}),(0,p.jsx)("input",{className:"form-control border-0",style:{maxWidth:"195px"},type:"text",onChange:e=>_(e.target.value),placeholder:"Search customer name, product, price, etc..."})]})})]})})})}),(0,p.jsx)(c.cp,{data:M||[],columns:Y,pagination:!0,progressPending:j,progressComponent:(0,p.jsx)(v.c,{})})]})};var N=t(2555),b=t(3616);const g=function(e){var a,t,s,c,n,o;let{data:d}=e;return(0,p.jsx)("div",{className:"px-4",children:(0,p.jsxs)(r.c,{children:[(0,p.jsx)(i.c,{sm:12,xl:3,md:3,children:(0,p.jsx)(N.c,{children:(0,p.jsxs)(b.c,{style:{padding:"20px"},children:[(0,p.jsxs)(l.H6,{attrH6:{className:"fw-bolder"},children:[(0,p.jsx)("i",{className:"icofont icofont-truck me-2"})," Total Transactions"]}),(0,p.jsx)(l.H3,{attrH3:{className:"mb-0 mt-3 fw-bolder"},children:(null===d||void 0===d||null===(a=d.transactions)||void 0===a?void 0:a.totalTransactions)||0})]})})}),(0,p.jsx)(i.c,{sm:12,xl:3,md:3,className:"card_width",children:(0,p.jsx)(N.c,{children:(0,p.jsxs)(b.c,{style:{padding:"20px"},children:[(0,p.jsxs)(l.H6,{attrH6:{className:"fw-bolder"},children:[(0,p.jsx)("i",{className:"icofont icofont-truck me-2"})," Total Customers"]}),(0,p.jsx)(l.H3,{attrH3:{className:"mb-0 mt-3 fw-bolder"},children:(null===d||void 0===d||null===(t=d.transactions)||void 0===t?void 0:t.uniqueCustomerCount)||0})]})})}),(0,p.jsx)(i.c,{sm:12,xl:3,md:3,className:"card_width",children:(0,p.jsx)(N.c,{children:(0,p.jsxs)(b.c,{style:{padding:"20px"},children:[(0,p.jsxs)(l.H6,{attrH6:{className:"fw-bolder"},children:[(0,p.jsx)("i",{className:"icofont icofont-truck me-2"})," Total Revenue"]}),(0,p.jsxs)(l.H3,{attrH3:{className:"mb-0 mt-3 fw-bolder"},children:["$ ",(null===d||void 0===d||null===(s=d.transactions)||void 0===s||null===(c=s.revenue)||void 0===c?void 0:c.toFixed(2))||0]})]})})}),(0,p.jsx)(i.c,{sm:12,xl:3,md:3,className:"card_width",children:(0,p.jsx)(N.c,{children:(0,p.jsxs)(b.c,{style:{padding:"20px"},children:[(0,p.jsxs)(l.H6,{attrH6:{className:"fw-bolder"},children:[(0,p.jsx)("i",{className:"icofont icofont-truck me-2"})," Net Profit"]}),(0,p.jsxs)(l.H3,{attrH3:{className:"mb-0 mt-3 fw-bolder"},children:["$",(null===d||void 0===d||null===(n=d.net_profit)||void 0===n||null===(o=n.totalNetProfit)||void 0===o?void 0:o.toFixed(2))||0]})]})})})]})})};var _=t(1816);const k=()=>{const[e,a]=(0,s.useState)({}),[t,c]=(0,s.useState)(1),l=e=>{c(e),n(e)},n=async e=>{const t=await JSON.parse(localStorage.getItem("token"));try{let s,c;switch(e){case 1:s=f()().startOf("day"),c=f()().endOf("day");break;case 2:s=f()().startOf("week"),c=f()().endOf("week");break;case 3:s=f()().startOf("month"),c=f()().endOf("month");break;case 4:s=f()().startOf("year"),c=f()().endOf("year")}await u.c.get("".concat(h.OM,"/api/order/get-all-transactions-count"),{headers:{Authorization:"".concat(t)},params:{start_date:f()(s).format("YYYY-MM-DD"),end_date:f()(c).format("YYYY-MM-DD")}}).then((e=>{if(200===e.status){let t=null===e||void 0===e?void 0:e.data.data;//console.log("updated data",t),a(t)}}))}catch(s){console.error(s)}};return(0,s.useEffect)((()=>{n(1)}),[]),(0,p.jsx)(s.Fragment,{children:(0,p.jsxs)(_.c,{fluid:!0,style:{paddingTop:"30px"},children:[(0,p.jsx)(r.c,{children:(0,p.jsx)(i.c,{sm:"12",children:(0,p.jsx)(N.c,{children:(0,p.jsxs)(b.c,{className:"p-0 py-4",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("div",{className:"w-75",children:(0,p.jsx)("div",{className:"px-4",children:(0,p.jsxs)(o.c,{tabs:!0,className:"product_variant_tabs mb-3",children:[(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:1===t?"active":"",onClick:()=>l(1),children:"Today"})}),(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:2===t?"active":"",onClick:()=>l(2),children:"Weekly"})}),(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:3===t?"active":"",onClick:()=>l(3),children:"Monthly"})}),(0,p.jsx)(d.c,{children:(0,p.jsx)(m.c,{className:4===t?"active":"",onClick:()=>l(4),children:"Yearly"})})]})})}),(0,p.jsx)("div",{className:"w-25"})]}),(0,p.jsx)("hr",{style:{borderColor:"#F1F3F9",opacity:1}}),(0,p.jsx)(g,{data:e})]})})})}),(0,p.jsx)(r.c,{children:(0,p.jsx)(i.c,{sm:"12",children:(0,p.jsx)(N.c,{children:(0,p.jsx)(b.c,{style:{padding:"15px"},children:(0,p.jsx)(y,{})})})})})]})})}}}]);
//# sourceMappingURL=696.b5b8294e.chunk.js.map